<!DOCTYPE html>
<html>
<head>
  <title>Formulário de Cadastro</title>
</head>
<body>
  <h1>Cadastro</h1>
  <form id="dataForm">
    <label for="nome">Nome:</label>
    <input type="text" id="nome" name="nome" value="João Silva" required><br>

    <label for="rg">RG:</label>
    <input type="text" id="rg" name="rg" value="123456789" required><br>

    <label for="expe_por">Expedido por:</label>
    <input type="text" id="expe_por" name="expe_por" value="SSP" required><br>

    <label for="cpf">CPF:</label>
    <input type="text" id="cpf" name="cpf" value="12345678901" required><br>

    <label for="data_nasc">Data de Nascimento:</label>
    <input type="date" id="data_nasc" name="data_nasc" value="2000-01-01" required><br>

    <label for="rua">Rua:</label>
    <input type="text" id="rua" name="rua" value="Rua das Flores" required><br>

    <label for="numero_casa">Número da Casa:</label>
    <input type="number" id="numero_casa" name="numero_casa" value="123" required><br>

    <label for="bairro">Bairro:</label>
    <input type="text" id="bairro" name="bairro" value="Centro" required><br>

    <label for="cidade">Cidade:</label>
    <input type="text" id="cidade" name="cidade" value="Dois Vizinhos" required><br>

    <label for="uf">UF:</label>
    <input type="text" id="uf" name="uf" maxlength="2" value="PR" required><br>

    <label for="tel_fixo">Telefone Fixo:</label>
    <input type="text" id="tel_fixo" name="tel_fixo" value="4633551234"><br>

    <label for="celular_a">Celular A:</label>
    <input type="text" id="celular_a" name="celular_a" value="46999998888" required><br>

    <label for="celular_b">Celular B:</label>
    <input type="text" id="celular_b" name="celular_b" value="46988887777"><br>

    <label for="email">E-mail:</label>
    <input type="email" id="email" name="email" value="joao.silva@example.com" required><br>

    <label for="curso">Curso:</label>
    <input type="text" id="curso" name="curso" value="Técnico em Desenvolvimento de Sistemas" required><br>

    <button type="submit">Enviar</button>
  </form>

  <script>
    const form = document.getElementById('dataForm');
    form.addEventListener('submit', function(event) {
      event.preventDefault();

      const dados = {
        nome: form.nome.value,
        rg: form.rg.value,
        expe_por: form.expe_por.value,
        cpf: form.cpf.value,
        data_nasc: form.data_nasc.value,
        rua: form.rua.value,
        numero_casa: form.numero_casa.value,
        bairro: form.bairro.value,
        cidade: form.cidade.value,
        uf: form.uf.value,
        tel_fixo: form.tel_fixo.value,
        celular_a: form.celular_a.value,
        celular_b: form.celular_b.value,
        email: form.email.value,
        curso: form.curso.value
      };

      fetch('http://127.0.0.1:3000/candidatos', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(dados)
      })
      .then(async response => {
        if (!response.ok) {
          const errMsg = await response.text();
          throw new Error(`Erro ${response.status}: ${errMsg}`);
        }
        return response.json();
      })
      .then(data => {
        alert('Dados enviados com sucesso!');
        window.location.href = 'candidatos.html';
      })
      .catch(error => console.error('Erro:', error));
    });
  </script>
</body>
</html>
